name = "mahiteklab-api"
main = "src/index.js"
compatibility_date = "2025-12-01"
workers_dev = true
preview_urls = true

# Config local:
# - `wrangler dev` (usa .wrangler/ y un DB local emulado si configuras D1)
# - `wrangler d1 create mahiteklab-db` y pega el id abajo
#
# Deploy:
# - `wrangler deploy`

[vars]
ALLOWED_ORIGINS = "https://mahitek3dlab.com,https://www.mahitek3dlab.com,https://dtcsrni.github.io,https://mahiteklab-admin.pages.dev"
PUBLIC_LANDING_URL = "https://mahitek3dlab.com/"

# Email provider (elige 1):
# EMAIL_PROVIDER = "brevo" | "resend" | "ses"
# Nota: se configuran secrets con `wrangler secret put ...`.
EMAIL_PROVIDER = "brevo"

# Admin auth (MVP): token manual en el admin panel.
# Recomendado (luego): Cloudflare Access cuando haya dominio propio.
ADMIN_ROLE_TOKENS_JSON = "{\"general\":\"\",\"finance\":\"\",\"marketing\":\"\",\"ops\":\"\"}"

[env.dev]
name = "mahiteklab-api-dev"

[env.dev.vars]
ALLOWED_ORIGINS = "http://localhost:8080,http://127.0.0.1:8080,http://localhost:5500,http://127.0.0.1:5500"
PUBLIC_LANDING_URL = "http://localhost:8080/"

[[d1_databases]]
binding = "DB"
database_name = "mahiteklab-db"
database_id = "ee58d4db-eb60-4451-871d-fe59b452770c"
