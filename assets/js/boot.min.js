import{initScrollNarrative as t}from"./modules/scroll-narrative.js";import{initSVGAnimations as o}from"./modules/svg-animations.js";import e from"./modules/data-manager.js";import n from"./modules/copywriting-binder.js";import r from"./modules/ui-components.js";import a,{ConfigUtils as i}from"./modules/config.js";function c(){const t=document.querySelectorAll("[data-counter]"),o=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",function(t){const o=t.getAttribute("data-counter");if(!o)return;const e=o.match(/(\d+)/);if(!e)return void(t.textContent=o);const n=parseInt(e[1],10),r=o.replace(e[1],""),a=n/60;let i=0,c=0;const s=setInterval(()=>{c++,i=Math.min(i+a,n),t.textContent=Math.floor(i)+r,c>=60&&(clearInterval(s),t.textContent=o)},2e3/60)}(t.target),o.unobserve(t.target))})},{threshold:.5});t.forEach(t=>o.observe(t))}const s=()=>{try{c()}catch(t){console.error("[Boot] Error inicializando contadores:",t)}const s=[()=>{e.init()},()=>e.preloadCritical().catch(t=>{console.warn("[Boot] Error en precarga:",t)}),()=>n.bindCopywriting().catch(t=>{console.warn("[Boot] Error enlazando copywriting:",t)}),()=>t(),()=>o(),()=>{window.MahitekUI=r,window.MahitekData=e,i.log("Boot completado. VersiÃ³n:",a.VERSION)}],d=()=>{if(0===s.length)return void document.documentElement.classList.add("js-modules-ready");const t=()=>{const t=s.shift();if(!t)return d();try{const o=t();if(o&&"function"==typeof o.then)return void o.finally(d)}catch(t){console.error("[Boot] Error en tarea diferida:",t)}d()};"requestIdleCallback"in window?window.requestIdleCallback(t,{timeout:800}):window.setTimeout(t,32)};window.setTimeout(d,150)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s,{once:!0}):s();