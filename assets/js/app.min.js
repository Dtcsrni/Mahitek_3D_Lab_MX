const e={PRICE_MARKUP:1,PRICE_STEP:10,MESSENGER_PAGE:"mahitek3dlabmx",PLACEHOLDER_IMAGE:"assets/img/placeholder-catalog.svg",DATA_PATHS:{brand:"assets/data/brand.json",productsBase:"data/products.json",promos:"data/promos.json",social:"data/social.json",faq:"data/faq.json"},DEBUG_MODE:!1},t=((()=>{if(void 0!==import.meta&&import.meta.url)try{return new URL("../..",import.meta.url).href}catch(e){}if("undefined"!=typeof document&&document.baseURI){const e=document.baseURI;return e.endsWith("/")?e:`${e}/`}if("undefined"!=typeof window&&window.location){const e=window.location.href;return e.endsWith("/")?e:e.replace(/[^/]*$/,"")}})(),{IDIOMAS_SOPORTADOS:["es-MX","es","en"],IDIOMA_PREDETERMINADO:"es-MX",obtenerIdioma(){try{const e=localStorage.getItem("idioma-preferido");if(e&&this.IDIOMAS_SOPORTADOS.includes(e))return e;const t=navigator.language||navigator.userLanguage||"";return t.toLowerCase().startsWith("es-mx")?"es-MX":t.toLowerCase().startsWith("es")?"es":t.toLowerCase().startsWith("en")?"en":this.IDIOMA_PREDETERMINADO}catch(e){return console.warn("Error detectando idioma:",e),this.IDIOMA_PREDETERMINADO}},guardarIdioma(e){try{return!!this.IDIOMAS_SOPORTADOS.includes(e)&&(localStorage.setItem("idioma-preferido",e),!0)}catch(e){return console.warn("Error guardando idioma:",e),!1}},"esEspa√±ol"(){return this.obtenerIdioma().startsWith("es")},esMexicano(){return"es-MX"===this.obtenerIdioma()},actualizarCintillo(){const e=document.querySelector(".cintillo-texto");if(!e)return;const t=n.obtener("cintillo.construccion");e.textContent=t,e.setAttribute("data-idioma",this.obtenerIdioma())},inicializar(){const t=this.obtenerIdioma();document.documentElement.setAttribute("lang",t),this.actualizarCintillo(),e.DEBUG_MODE&&(console.log("üåê Idioma detectado:",t),console.log("üá≤üáΩ Es mexicano:",this.esMexicano()))}}),n={obtener(e){const n=t.obtenerIdioma(),o=this.textos[e];return o?o[n]||o[n.split("-")[0]]||o["es-MX"]||o.en||e:(console.warn(`Texto no encontrado: ${e}`),e)},textos:{"cintillo.construccion":{"es-MX":"‚ö° SITIO EN DESARROLLO ‚ö° PR√ìXIMAMENTE FUNCIONALIDAD COMPLETA ‚ö°",es:"‚ö° EN CONSTRUCCI√ìN ‚ö° PR√ìXIMAMENTE DISPONIBLE ‚ö°",en:"‚ö° UNDER DEVELOPMENT ‚ö° COMING SOON ‚ö°"},"sistema.cargando":{"es-MX":"Cargando...",es:"Cargando...",en:"Loading..."},"sistema.error":{"es-MX":"Error al cargar",es:"Error al cargar",en:"Loading error"},"sistema.sinResultados":{"es-MX":"No se encontraron resultados",es:"No se encontraron resultados",en:"No results found"},"productos.desde":{"es-MX":"Desde",es:"Desde",en:"From"},"productos.verMas":{"es-MX":"Ver m√°s detalles",es:"Ver m√°s detalles",en:"View more details"},"productos.disponible":{"es-MX":"Disponible",es:"Disponible",en:"Available"},"productos.agotado":{"es-MX":"Agotado",es:"Agotado",en:"Out of stock"},"promos.titulo":{"es-MX":"Promociones Especiales",es:"Promociones Especiales",en:"Special Offers"},"promos.ahorra":{"es-MX":"Ahorra",es:"Ahorra",en:"Save"},"promos.valido":{"es-MX":"V√°lido hasta",es:"V√°lido hasta",en:"Valid until"},"filtros.todos":{"es-MX":"Todos",es:"Todos",en:"All"},"filtros.categoria":{"es-MX":"Categor√≠a",es:"Categor√≠a",en:"Category"},"filtros.limpiar":{"es-MX":"Limpiar filtros",es:"Limpiar filtros",en:"Clear filters"},"contacto.messenger_main":{"es-MX":"Contactar por Messenger",es:"Contactar por Messenger",en:"Contact via Messenger"},"contacto.messenger":{"es-MX":"Enviar mensaje",es:"Enviar mensaje",en:"Send message"},"contacto.cotizar":{"es-MX":"Solicitar cotizaci√≥n",es:"Solicitar cotizaci√≥n",en:"Request quote"},"faq.titulo":{"es-MX":"Preguntas Frecuentes",es:"Preguntas Frecuentes",en:"Frequently Asked Questions"},"faq.ver":{"es-MX":"Ver respuesta",es:"Ver respuesta",en:"View answer"},"error.productos":{"es-MX":"Error al cargar productos. Por favor, intente nuevamente.",es:"Error al cargar productos. Por favor, intente nuevamente.",en:"Error loading products. Please try again."},"error.promos":{"es-MX":"Error al cargar promociones. Por favor, intente nuevamente.",es:"Error al cargar promociones. Por favor, intente nuevamente.",en:"Error loading promotions. Please try again."},"error.faq":{"es-MX":"Error al cargar preguntas frecuentes. Por favor, intente nuevamente.",es:"Error al cargar preguntas frecuentes. Por favor, intente nuevamente.",en:"Error loading FAQs. Please try again."},"error.red":{"es-MX":"Error de conexi√≥n. Verifique su conexi√≥n a internet.",es:"Error de conexi√≥n. Verifique su conexi√≥n a internet.",en:"Connection error. Please check your internet connection."},"debug.iniciado":{"es-MX":"Sistema iniciado correctamente",es:"Sistema iniciado correctamente",en:"System started successfully"},"debug.productosOK":{"es-MX":"Productos cargados",es:"Productos cargados",en:"Products loaded"},"debug.promosOK":{"es-MX":"Promociones cargadas",es:"Promociones cargadas",en:"Promotions loaded"},"debug.faqOK":{"es-MX":"Preguntas frecuentes cargadas",es:"Preguntas frecuentes cargadas",en:"FAQs loaded"}}},o=window.matchMedia("(prefers-reduced-motion: reduce)");let a=null;const r={callbacks:new Set,timeout:null,ticking:!1,DEBOUNCE_MS:150,register(e){this.callbacks.add(e),e()},unregister(e){this.callbacks.delete(e)},handleResize(){this.ticking||(this.ticking=!0,requestAnimationFrame(()=>{clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.callbacks.forEach(e=>{try{e()}catch(e){console.error("Resize callback error:",e)}}),this.ticking=!1},this.DEBOUNCE_MS)}))},init(){window.addEventListener("resize",()=>this.handleResize(),{passive:!0})}};function i(e){return String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function s(e,{allowRelative:t=!0}={}){try{const n=String(e||"").trim();if(!n)return"#";if(/^(javascript|data):/i.test(n))return"#";if(t&&(n.startsWith("/")||n.startsWith("./")||n.startsWith("../")||!n.startsWith("//")&&!/^[a-zA-Z][a-zA-Z\d+.-]*:/.test(n)))return n;const o="undefined"!=typeof document&&document.baseURI||("undefined"!=typeof window?window.location.href:"https://example.invalid/"),a=new URL(n,o);if(["http:","https:","mailto:","tel:"].includes(a.protocol))return a.href}catch(e){}return"#"}function c(e,t={}){try{"function"==typeof gtag&&gtag("event",e,t)}catch(e){}}async function d(e){try{const t=s(e);if("#"===t)throw new Error(`Ruta no segura: ${e}`);const o=await fetch(t);if(!o.ok)throw new Error(`${n.obtener("error.red")} (${t})`);return await o.json()}catch(t){return console.error(`‚ùå ${n.obtener("sistema.error")}: ${e}`,t),null}}function l(e){if(!(e&&e instanceof Element))return;if(o.matches)return e.matches("[data-animate]")&&e.classList.add("is-visible"),void e.querySelectorAll("[data-animate]").forEach(e=>e.classList.add("is-visible"));if(!a)return;const t=[];e.matches("[data-animate]")&&!e.classList.contains("is-visible")&&t.push(e),e.querySelectorAll("[data-animate]").forEach(e=>{e.classList.contains("is-visible")||t.push(e)}),t.forEach(e=>a.observe(e))}r.init();let u=[],m=[];async function p(){const t=await d(e.DATA_PATHS.productsBase);t&&(u=t.filter(e=>"activo"===e.estado),m=[...u],g(),function(){const e=document.getElementById("category-filter");if(!e)return;const t=[...new Set(u.map(e=>e.categoria))];e.innerHTML="";const n=document.createElement("option");n.value="todas",n.textContent="Todas",e.appendChild(n),t.forEach(t=>{if(!t)return;const n=document.createElement("option");n.value=String(t),n.textContent=String(t),e.appendChild(n)})}())}function g(){const t=document.getElementById("product-carousel");if(t){if(0===m.length)return t.innerHTML='\n      <div class="card glass placeholder-card" data-animate="fade-up">\n        <img src="assets/img/placeholder-catalog.svg" alt="Sin coincidencias en el cat√°logo" class="placeholder-illustration" width="320" height="240" loading="lazy" decoding="async" />\n        <p>No se encontraron productos con los filtros seleccionados. Ajusta los filtros o cu√©ntanos qu√© est√°s buscando.</p>\n      </div>\n    ',void l(t);t.innerHTML=m.map((t,n)=>{Math.min(n,5);const o=t.imagen&&!t.imagen.startsWith("/")&&!String(t.imagen).includes("."),a=i(t.nombre||""),r=o?`<div class="product-emoji">${i(t.imagen)}</div>`:`<img class="product-image" src="${s(t.imagen||e.PLACEHOLDER_IMAGE)}" alt="${a}" data-placeholder="${e.PLACEHOLDER_IMAGE}" loading="lazy" decoding="async" />`,d=[{label:"Material",value:t.material},{label:"Incluye",value:t.incluye},{label:"Variantes",value:t.variantes}].filter(e=>e.value),l=d.length?`\n        <dl class="product-details">\n          ${d.map(e=>`\n            <div>\n              <dt>${i(e.label)}</dt>\n              <dd>${i(e.value)}</dd>\n            </div>\n          `).join("")}\n        </dl>\n      `:"",u=t.tags&&t.tags.length?`\n        <div class="product-tags">\n          ${t.tags.map(e=>`<span class="tag">${i(e)}</span>`).join("")}\n        </div>\n      `:"",m=t.sugerencias?`<p class="product-suggestions">üí° <strong>Sugerencias:</strong> ${i(t.sugerencias)}</p>`:"";return c("view_item",{item_id:t.id,item_name:t.nombre,price:t.precio_mxn,item_category:t.categoria}),`\n  <article class="card glass product-card animate-delay-${Math.min(n,5)}" role="listitem" data-animate="fade-up">\n      <div class="product-media">\n        ${r}\n      </div>\n      <div class="product-meta">\n        <span class="product-sku">${i(t.id||"")}</span>\n        ${t.categoria?`<span class="product-line">${i(t.categoria)}</span>`:""}\n      </div>\n  <h3 class="product-name">${a}</h3>\n  <p class="product-price">${t.precio_rango_mxn?`$${i(String(t.precio_rango_mxn))} MXN`:`$${i(String(t.precio_mxn))} MXN`}</p>\n  <p class="product-price-note">Rango por personalizaci√≥n, tama√±o/grosor, acabados, herrajes/adhesivos, alcance y tirada.</p>\n      <p class="product-description">${i(t.descripcion||"")}</p>\n      ${l}\n      ${u}\n      ${m}\n      <a href="${function(t){const n=`https://m.me/${e.MESSENGER_PAGE}`;return t?`${n}?ref=${encodeURIComponent(t)}`:n}(`product:${encodeURIComponent(t.id||"")}|${encodeURIComponent(t.nombre)}`)}" \n         class="btn btn-primary product-cta" \n         target="_blank" \n         rel="noopener noreferrer" \n         data-sku="${t.id}" \n         data-name="${i(t.nombre)}">\n        Consultar disponibilidad en Messenger\n      </a>\n    </article>\n  `}).join(""),l(t),function(t){if(!t)return;t.querySelectorAll("img.product-image").forEach(t=>{t.addEventListener("error",function(){const t=this.getAttribute("data-placeholder")||e.PLACEHOLDER_IMAGE;this.src!==t&&(this.src=t)},{once:!0})})}(t),function(e){const t=document.getElementById("catalogo"),n=t?.querySelector("#product-carousel"),o=t?.querySelector(".carousel-btn-prev"),a=t?.querySelector(".carousel-btn-next"),i=document.getElementById("catalog-dots");if(!(n&&o&&a&&i))return;const s="Navegaci√≥n del cat√°logo";let d=0,l=1;function u(){l=window.innerWidth>=1024?3:window.innerWidth>=768?2:1}function m(){return Math.ceil(e/l)}function p(){const e=100/l*-d;n.style.transform=`translateX(${e}%)`,g(),f()}function g(){const e=m();o.disabled=0===d,a.disabled=d>=e-1}function h(){const e=m();if(i.innerHTML="",e<=1)return i.setAttribute("aria-hidden","true"),i.removeAttribute("role"),void i.removeAttribute("aria-label");i.removeAttribute("aria-hidden"),i.setAttribute("role","tablist"),i.setAttribute("aria-label",s);for(let t=0;t<e;t++){const e=document.createElement("button");e.classList.add("carousel-dot"),e.type="button",e.setAttribute("role","tab"),e.setAttribute("aria-label",`Ir a p√°gina ${t+1}`),e.setAttribute("aria-selected",t===d?"true":"false"),e.setAttribute("tabindex",t===d?"0":"-1"),t===d&&e.classList.add("active"),e.addEventListener("click",()=>{d=t,p(),c("catalog_carousel_navigation",{method:"dot",index:d})}),i.appendChild(e)}}function f(){i.querySelectorAll(".carousel-dot").forEach((e,t)=>{e.classList.toggle("active",t===d),e.setAttribute("aria-selected",t===d?"true":"false"),e.setAttribute("tabindex",t===d?"0":"-1")})}i.addEventListener("keydown",e=>{const t=m();if(t<=1)return;let n=!0;if("ArrowRight"===e.key||"ArrowDown"===e.key?d=Math.min(d+1,t-1):"ArrowLeft"===e.key||"ArrowUp"===e.key?d=Math.max(d-1,0):"Home"===e.key?d=0:"End"===e.key?d=t-1:n=!1,n){e.preventDefault(),p();const t=i.querySelector(".carousel-dot.active");t?.focus({preventScroll:!0})}}),o.addEventListener("click",()=>{d>0&&(d--,p(),c("catalog_carousel_navigation",{method:"button",direction:"prev",index:d}))}),a.addEventListener("click",()=>{const e=m();d<e-1&&(d++,p(),c("catalog_carousel_navigation",{method:"button",direction:"next",index:d}))});let v=0,b=0;function E(){const e=50,t=v-b;Math.abs(t)>e&&(t>0?a.click():o.click(),c("catalog_carousel_navigation",{method:"swipe",direction:t>0?"next":"prev"}))}n.addEventListener("touchstart",e=>{v=e.changedTouches[0].screenX},{passive:!0}),n.addEventListener("touchend",e=>{b=e.changedTouches[0].screenX,E()},{passive:!0});const y=()=>{const e=l;u(),e!==l&&(d=0,h(),p())};r.register(y),u(),h(),p(),c("catalog_carousel_init",{items:e,itemsPerView:l})}(m.length),t.addEventListener("click",e=>{const t=e.target.closest(".product-cta");t&&c("add_to_cart",{item_id:t.getAttribute("data-sku")||"",item_name:t.getAttribute("data-name")||""})},{once:!0})}}function h(){const e=document.getElementById("category-filter")?.value||"todas",t=document.getElementById("search-input")?.value.toLowerCase()||"";m=u.filter(n=>{const o="todas"===e||n.categoria===e,a=!t||n.nombre.toLowerCase().includes(t)||(n.descripcion||"").toLowerCase().includes(t)||(n.id||"").toLowerCase().includes(t)||n.tags?.some(e=>e.toLowerCase().includes(t));return o&&a}),g()}let f=!1;async function v(){if(f)return;const t=await d(e.DATA_PATHS.promos),n=document.getElementById("promos-container");if(!n)return;f=!0;const o=new Date,a=(Array.isArray(t)?t:[]).filter(e=>{if(e.estado&&"inactivo"===e.estado)return!1;if(!e.desde||!e.hasta)return"activo"===e.estado;const t=new Date(e.desde),n=new Date(e.hasta);return o>=t&&o<=n}),u=new Set,m=[];a.forEach(e=>{const t=e.id||e.titulo||`promo-${m.length}`,n=String(t).toLowerCase();u.has(n)||(u.add(n),m.push({...e,__resolvedId:t}))});const p={combo:0,stickers:1,fidelidad:2,referidos:3,addon:4},g=e=>{const t=Number(e);return Number.isFinite(t)?t:Number.MAX_SAFE_INTEGER};m.sort((e,t)=>{const n=p[String(e.tipo||"").toLowerCase()]??99,o=p[String(t.tipo||"").toLowerCase()]??99;if(n!==o)return n-o;const a=(t.destacado?1:0)-(e.destacado?1:0);if(0!==a)return a;const r=Math.min(g(e.precio_regular),g(e.precio_especial),g(e.precio_base),g(e.monto_minimo)),i=Math.min(g(t.precio_regular),g(t.precio_especial),g(t.precio_base),g(t.monto_minimo));return r!==i?r-i:String(e.titulo||"").localeCompare(String(t.titulo||""),"es")});const h=m.length,v=document.querySelector("#promos .section-title");if(v&&(h>0?v.innerHTML=`üéØ Promociones activas <span class="promo-count">(${h})</span>`:v.textContent="üéØ Promociones activas"),0===h)return void c("promos_empty",{reason:"no_active_promos"});const y=e=>{const t=Number(e);return Number.isFinite(t)?t%1==0?`$${t}`:`$${t.toFixed(2)}`:null},w=m.map((e,t)=>{const n=70*Math.min(t,5),o=e.destacado?"promo-destacado":"",a=e.animacion?`promo-anim-${e.animacion}`:"",r=e.tipo?String(e.tipo):"general",c=i(String(e.__resolvedId||e.id||`promo-${t}`));let d="";const l=y(e.precio_regular??e.precio_base),u=Number.isFinite(Number(e.precio_unitario))?`<span class="promo-unitario">$${Number(e.precio_unitario).toFixed(2)} c/u</span>`:"";if(l)d=`\n        <div class="promo-precio">\n          <span class="promo-precio-total">${l}</span>\n          ${u}\n        </div>\n      `;else{const t=y(e.precio_especial),n=y(e.monto_minimo);t?d=`\n        <div class="promo-precio">\n          <span class="promo-precio-especial">${t}</span>\n        </div>\n      `:n&&(d=`\n        <div class="promo-minimo">\n          <span>M√≠nimo: ${n}</span>\n        </div>\n      `)}const m=e.badge?`<span class="promo-badge">${i(e.badge)}</span>`:"",p=e.beneficios&&e.beneficios.length>0?`<ul class="promo-beneficios">${e.beneficios.map(e=>`<li>‚úì ${i(e)}</li>`).join("")}</ul>`:"";let g="";"permanente"===(e.tipo||"").toLowerCase()?g='<p class="promo-validez">‚è∞ Promoci√≥n permanente</p>':e.desde&&e.hasta&&(g=`<p class="promo-validez">üìÖ V√°lido ${i(E(e.desde))} ‚Äì ${i(E(e.hasta))}</p>`);const h=i(e.titulo||"Promoci√≥n"),f=e.cta_url?`<a href="${s(e.cta_url)}" class="btn btn-primary promo-cta" target="_blank" rel="noopener noreferrer" data-promo-id="${c}" data-promo-name="${h}">${i(e.cta_text||"M√°s info")}</a>`:`<button class="btn btn-primary promo-cta-contact" data-promo-id="${c}" data-promo-name="${h}">${i("Consultar por Messenger")}</button>`;let v="";if("string"==typeof e.icono&&e.icono.trim()){const t=e.icono.trim();if(/\.svg(\?|$)/i.test(t)){const e=s(t);v=e&&"#"!==e?`<img src="${e}" alt="${h}" class="promo-icon" width="200" height="200" loading="lazy" decoding="async" data-promo-id="${c}" data-icon-src="${i(e)}" />`:'<span class="promo-emoji" aria-hidden="true">üéÅ</span>'}else v=`<span class="promo-emoji" aria-hidden="true">${i(t)}</span>`}else v='<span class="promo-emoji" aria-hidden="true">üéÅ</span>';return`<article class="card glass promo-card ${o} ${a} animate-delay-${n}" data-animate="fade-up" data-promo-id="${c}" data-promo-tipo="${i(r)}">${m?`<div class="promo-badge-wrapper">${m}</div>`:""}<div class="promo-icono-container">${v}</div><h3 class="promo-titulo">${h}</h3><p class="promo-subtitulo">${i(e.subtitulo||e.descripcion||"")}</p>${d}${p}${g}${f}</article>`});n.innerHTML=w.join(""),b(n),l(n),function(e,t){if(!e)return;const n=e.closest(".carousel-container"),o=n?.closest("section"),a=e,i=n?.querySelector(".carousel-btn-prev"),s=n?.querySelector(".carousel-btn-next"),d=o?.querySelector("#promos-dots");if(!(n&&i&&s&&d))return;if(!(n&&i&&s&&d&&wrapper))return;const l=Array.from(a.children);if(0===l.length)return;let u=0,m=1,p=0;const g=()=>{if(l.length<=1)return l[0]?.getBoundingClientRect().width||wrapper.clientWidth||a.clientWidth;const e=l[1].offsetLeft-l[0].offsetLeft;return e>0?e:l[0]?.getBoundingClientRect().width||wrapper.clientWidth||a.clientWidth},h=()=>Math.max(0,t-m),f=()=>Math.ceil(t/m),v=()=>Math.min(f()-1,Math.floor(u/Math.max(m,1))),b=()=>{m=window.innerWidth>=1024?3:window.innerWidth>=768?2:1,p=g(),(!Number.isFinite(p)||p<=0)&&(p=wrapper.clientWidth||a.clientWidth||0);const e=h();u>e&&(u=Math.max(0,Math.floor(e/Math.max(m,1))*m))},E=()=>{i.disabled=u<=0,s.disabled=u>=h()},y=()=>{const e=d.querySelectorAll(".carousel-dot"),t=v();e.forEach((e,n)=>{e.classList.toggle("active",n===t)})},w=()=>{const e=-u*p;a.style.transform=`translateX(${e}px)`,E(),y()},A=()=>{const e=f();if(d.innerHTML="",e<=1)return d.setAttribute("hidden",""),void y();d.removeAttribute("hidden");for(let t=0;t<e;t+=1){const e=document.createElement("button");e.type="button",e.classList.add("carousel-dot"),e.setAttribute("aria-label",`Ir a p√°gina ${t+1}`),t===v()&&e.classList.add("active"),e.addEventListener("click",()=>{u=t*m,w(),c("promo_carousel_navigation",{method:"dot",page:pageIndex+1,total_pages:f()})}),d.appendChild(e)}};i.addEventListener("click",()=>{u<=0||(u=Math.max(0,u-m),w())}),s.addEventListener("click",()=>{const e=h();u>=e||(u=Math.min(e,u+m),w())});let L=0,M=0;function $(){const e=50,t=L-M;Math.abs(t)>e&&(t>0?s.click():i.click())}e.addEventListener("touchstart",e=>{L=e.changedTouches[0].screenX},{passive:!0}),e.addEventListener("touchend",e=>{M=e.changedTouches[0].screenX,$()},{passive:!0});const _=()=>{const e=v();b(),A(),u=Math.min(e*m,h()),w()};r.register(_),b(),A(),w({smooth:!1})}(n,allPromos.length),n.addEventListener("click",e=>{const t=e.target.closest(".promo-cta");t&&c("select_promotion",{promotion_id:t.getAttribute("data-promo-id")||"",promotion_name:t.getAttribute("data-promo-name")||""})}),n.addEventListener("click",t=>{const n=t.target.closest(".promo-cta-contact");if(!n)return;const o=n.getAttribute("data-promo-name")||"Promoci√≥n";window.open(`https://m.me/${e.MESSENGER_PAGE}`,"_blank","noopener"),c("contact_promo",{promotion_id:n.getAttribute("data-promo-id")||"",promotion_name:o,platform:"messenger"})})}function b(e){if(!e)return;const t=Array.from(e.querySelectorAll("img.promo-icon"));if(0===t.length)return void(e.dataset.iconsReady="true");let n=t.length;const o=()=>{n-=1,n<=0&&(e.dataset.iconsReady="true")};t.forEach(e=>{const t=()=>{if(!e.isConnected)return void o();const t=document.createElement("span");t.className="promo-emoji",t.setAttribute("aria-hidden","true"),t.textContent="üéÅ",t.dataset.iconStatus="fallback",t.dataset.promoId=e.getAttribute("data-promo-id")||"";const n=e.parentElement;n?n.replaceChild(t,e):e.replaceWith(t),c("promo_icon_missing",{promotion_id:t.dataset.promoId||"",src:e.getAttribute("data-icon-src")||e.currentSrc||e.src||""}),o()},n=()=>{e.dataset.iconStatus="loaded",o()};e.complete?e.naturalWidth>0?n():t():(e.addEventListener("load",n,{once:!0}),e.addEventListener("error",t,{once:!0}))})}function b(e){if(!e)return;const t=Array.from(e.querySelectorAll("img.promo-icon"));if(0===t.length)return void(e.dataset.iconsReady="true");let n=t.length;const o=()=>{n-=1,n<=0&&(e.dataset.iconsReady="true")};t.forEach(e=>{const t=()=>{if(!e.isConnected)return void o();const t=document.createElement("span");t.className="promo-emoji",t.setAttribute("aria-hidden","true"),t.textContent="üéÅ",t.dataset.iconStatus="fallback",t.dataset.promoId=e.getAttribute("data-promo-id")||"";const n=e.parentElement;n?n.replaceChild(t,e):e.replaceWith(t),c("promo_icon_missing",{promotion_id:t.dataset.promoId||"",src:e.getAttribute("data-icon-src")||e.currentSrc||e.src||""}),o()},n=()=>{e.dataset.iconStatus="loaded",o()};e.complete?e.naturalWidth>0?n():t():(e.addEventListener("load",n,{once:!0}),e.addEventListener("error",t,{once:!0}))})}function b(e){if(!e)return;const t=Array.from(e.querySelectorAll("img.promo-icon"));if(0===t.length)return void(e.dataset.iconsReady="true");let n=t.length;const o=()=>{n-=1,n<=0&&(e.dataset.iconsReady="true")};t.forEach(e=>{const t=()=>{if(!e.isConnected)return void o();const t=document.createElement("span");t.className="promo-emoji",t.setAttribute("aria-hidden","true"),t.textContent="üéÅ",t.dataset.iconStatus="fallback",t.dataset.promoId=e.getAttribute("data-promo-id")||"";const n=e.parentElement;n?n.replaceChild(t,e):e.replaceWith(t),c("promo_icon_missing",{promotion_id:t.dataset.promoId||"",src:e.getAttribute("data-icon-src")||e.currentSrc||e.src||""}),o()},n=()=>{e.dataset.iconStatus="loaded",o()};e.complete?e.naturalWidth>0?n():t():(e.addEventListener("load",n,{once:!0}),e.addEventListener("error",t,{once:!0}))})}function E(e){return new Date(e).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"})}let y=!1;async function w(){if(y)return;const t=await d(e.DATA_PATHS.faq),n=document.getElementById("faq-list");if(!n)return;if(y=!0,!t||0===t.length)return n.innerHTML='\n      <div class="card glass placeholder-card" data-animate="fade-up">\n        <img src="assets/img/placeholder-faq.svg" alt="Preguntas frecuentes en preparaci√≥n" class="placeholder-illustration" width="320" height="240" loading="lazy" decoding="async" />\n        <p>A√∫n estamos documentando las preguntas frecuentes. Escr√≠benos por Messenger y resolvemos tu caso.</p>\n      </div>\n    ',void l(n);n.innerHTML=t.map((e,t)=>{Math.min(t,5);const n=`faq-${A(e.q)}`;return`\n  <details class="faq-item animate-delay-${Math.min(t,5)}" id="${n}" data-animate="fade-up">\n      <summary><span>${i(e.q)}</span></summary>\n      <p>${i(e.a)}</p>\n    </details>\n  `}).join(""),l(n);const o=document.getElementById("faq-top");if(o){const e=t.filter(e=>e.destacada);e.length>0&&(o.innerHTML=e.map(e=>{const t=`faq-${A(e.q)}`;return`<a class="faq-chip" href="#${t}" data-faq-target="#${t}" aria-label="Ir a: ${i(e.q)}">‚≠ê ${i(e.q)}</a>`}).join(""),o.addEventListener("click",e=>{const t=e.target.closest("a.faq-chip");if(!t)return;const n=t.getAttribute("data-faq-target");if(!n)return;const o=document.querySelector(n);o&&o.classList.contains("faq-item")&&(o.open=!0,o.scrollIntoView({behavior:"smooth",block:"start"})),e.preventDefault()}))}const a=document.getElementById("faq-search"),r=document.getElementById("faq-category"),s=document.getElementById("faq-expand"),c=document.getElementById("faq-collapse"),u=document.getElementById("faq-count"),m=Array.from(n.querySelectorAll(".faq-item"));if(r){Array.from(new Set(t.map(e=>e.categoria).filter(Boolean))).sort().forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e.charAt(0).toUpperCase()+e.slice(1),r.appendChild(t)})}function p(e){const t=(e||"").trim().toLowerCase(),n=r&&r.value?r.value:"";let o=0;if(m.forEach(e=>{const a=e.textContent.toLowerCase(),r=0===t.length||a.includes(t),i=!n||a.includes(n)||e.querySelector("summary span")?.textContent.toLowerCase().includes(n),s=r&&i;e.style.display=s?"":"none",s&&o++}),u){const e=m.length;u.textContent=`Mostrando ${o} de ${e} preguntas`}}if(a&&a.addEventListener("input",e=>p(e.target.value)),r&&r.addEventListener("change",()=>p(a?a.value:"")),s&&s.addEventListener("click",()=>m.forEach(e=>e.open=!0)),c&&c.addEventListener("click",()=>m.forEach(e=>e.open=!1)),u&&(u.textContent=`Mostrando ${m.length} de ${m.length} preguntas`),location.hash&&location.hash.startsWith("#faq-")){const e=document.querySelector(location.hash);e&&e.classList.contains("faq-item")&&(e.open=!0,e.scrollIntoView({behavior:"smooth",block:"start"}))}try{!function(e){if(!Array.isArray(e)||0===e.length)return;const t={"@context":"https://schema.org","@type":"FAQPage",mainEntity:e.map(e=>({"@type":"Question",name:e.q,acceptedAnswer:{"@type":"Answer",text:e.a}}))},n=JSON.stringify(t);let o=document.getElementById("faq-schema");o||(o=document.createElement("script"),o.type="application/ld+json",o.id="faq-schema",document.head.appendChild(o));o.textContent=n}(t)}catch(e){console.warn("FAQ schema injection skipped:",e)}}function A(e){return String(e).toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")}async function L(){let t=null;const n=await d(e.DATA_PATHS.brand);if(t=n&&n.social?n.social:await d(e.DATA_PATHS.social),!t)return;const o=document.getElementById("social-links");if(o){const e=[];t.instagram&&e.push({key:"instagram",label:"Instagram",url:t.instagram}),t.facebook&&e.push({key:"facebook",label:"Facebook",url:t.facebook}),t.tiktok&&e.push({key:"tiktok",label:"TikTok",url:t.tiktok}),o.innerHTML=e.map(e=>`\n      <a class="social-icon social-icon--${e.key}" href="${s(e.url)}" target="_blank" rel="noopener noreferrer" aria-label="${i(e.label)}" title="${i(e.label)}">\n        ${M(e.key)}\n        <span class="sr-only">${i(e.label)}</span>\n      </a>\n    `).join("")}const a=document.getElementById("hero-social-links");if(a){const e=[];t.instagram&&e.push({key:"instagram",label:"Instagram",url:t.instagram,icon:"instagram"}),t.facebook&&e.push({key:"facebook",label:"Facebook",url:t.facebook,icon:"facebook"}),t.tiktok&&e.push({key:"tiktok",label:"TikTok",url:t.tiktok,icon:"tiktok"}),a.innerHTML=e.map(e=>`\n      <a class="community-link" href="${s(e.url)}" target="_blank" rel="noopener noreferrer" aria-label="${i(e.label)}">\n        ${M(e.key)}\n        <span>${i(e.label)}</span>\n      </a>\n    `).join("")}}function M(e){const t={instagram:'<svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>',facebook:'<svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',tiktok:'<svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>',youtube:'<svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',twitter:'<svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>'};return t[e]||t.instagram}function $(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-menu"),n=document.querySelector(".header");if(!e||!t)return;const o=t.classList.contains("active");e.setAttribute("aria-expanded",String(o)),e.setAttribute("aria-label",o?"Cerrar men√∫":"Abrir men√∫");let a=!1;const i=()=>{a||(a=!0,t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","Abrir men√∫"),document.body.classList.remove("nav-open"),setTimeout(()=>{a=!1},350))};e.addEventListener("click",n=>{if(n.preventDefault(),n.stopPropagation(),a)return;const o=t.classList.contains("active");o?i():a||(a=!0,t.classList.add("active"),e.classList.add("active"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-label","Cerrar men√∫"),document.body.classList.add("nav-open"),setTimeout(()=>{a=!1},350)),c("nav_menu_toggle",{state:o?"closed":"open"})}),t.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{i(),c("nav_link_click",{href:e.getAttribute("href")})})}),document.addEventListener("click",n=>{!t.classList.contains("active")||t.contains(n.target)||e.contains(n.target)||(i(),c("nav_menu_close",{method:"outside_click"}))}),document.addEventListener("keydown",n=>{"Escape"===n.key&&t.classList.contains("active")&&(i(),e.focus(),c("nav_menu_close",{method:"escape_key"}))});r.register(()=>{window.innerWidth>=768&&t.classList.contains("active")&&(i(),c("nav_menu_close",{method:"resize_to_desktop"}))}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if("#"===t||!t)return;e.preventDefault();const o=document.querySelector(t);if(o){const e=n?n.offsetHeight:80,t=o.offsetTop-e;window.scrollTo({top:t,behavior:"smooth"})}})})}async function _(){t.inicializar(),function(){const e=document.documentElement,t=()=>{const t=.01*window.innerHeight;e.style.setProperty("--vh",`${t}px`)},n=()=>{const t=.01*window.innerWidth;e.style.setProperty("--vw",`${t}px`)},o=()=>{const t=document.querySelector(".header");t&&e.style.setProperty("--header-h",`${t.offsetHeight}px`)},a=()=>{try{const t=navigator.deviceMemory||2,n=navigator.hardwareConcurrency||2,o=window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=window.matchMedia("(pointer: fine)").matches,r=t>=4&&n>=6&&!o&&a;e.classList.toggle("device-high",r),e.classList.toggle("device-low",!r)}catch(t){e.classList.add("device-low")}};t(),o(),n(),a(),window.addEventListener("resize",()=>{t(),o(),n()},{passive:!0}),window.addEventListener("orientationchange",()=>{t(),o(),n()})}(),function(){try{void 0===window.gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer&&window.dataLayer.push(arguments)}),gtag("js",new Date),gtag("config","G-Y46M6J1EWS",{send_page_view:!0,anonymize_ip:!0})}catch(e){}}(),$(),function(){const e=document.getElementById("category-filter"),t=document.getElementById("search-input");e&&e.addEventListener("change",h),t&&t.addEventListener("input",h)}(),function(){const e=document.querySelector(".header");if(!e)return;let t=!1,n=0,o="up";const a=()=>{const a=window.scrollY,r=a-n;Math.abs(r)>5&&(o=r>0?"down":"up"),e.classList.toggle("is-scrolled",a>24),window.innerWidth<1024?e.classList.toggle("is-compact",a>300):e.classList.remove("is-compact");const i=document.body.classList.contains("nav-open"),s=a<100;"down"===o&&a>100&&!i?e.classList.add("is-hidden"):("up"===o||s||i)&&e.classList.remove("is-hidden"),n=a,t=!1};a(),window.addEventListener("scroll",()=>{t||(requestAnimationFrame(a),t=!0)},{passive:!0})}(),function(){const e=document.querySelectorAll("[data-animate]");e.length&&(o.matches?e.forEach(e=>e.classList.add("is-visible")):(a=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("is-visible")},50),t.unobserve(e.target))})},{threshold:.15,rootMargin:"0px 0px -8% 0px"}),e.forEach(e=>a.observe(e))))}(),document.querySelectorAll(".email-link[data-email-user][data-email-domain]").forEach(e=>{const t=e.getAttribute("data-email-user"),n=e.getAttribute("data-email-domain");if(!t||!n)return;const o=`${t}@${n}`;e.setAttribute("href",`mailto:${o}`);const a=e.getAttribute("data-email-label");e.textContent.trim()&&!a||(e.textContent=a||o),e.setAttribute("rel",`${e.getAttribute("rel")||""} nofollow noopener noreferrer`)}),function(){try{const e={"@context":"https://schema.org","@type":"Organization",name:"Mahitek 3D Lab",url:"https://dtcsrni.github.io/Mahitek_3D_Lab_MX/",logo:"https://dtcsrni.github.io/Mahitek_3D_Lab_MX/assets/img/mark-icon.svg",sameAs:["https://www.instagram.com/mahitek3dlab","https://www.facebook.com/mahitek3dlab"],description:"Laboratorio de impresi√≥n 3D en PETG desde Pachuca, M√©xico. Creamos piezas personalizadas para regalos, decoraci√≥n y proyectos creativos.",address:{"@type":"PostalAddress",addressLocality:"Pachuca",addressRegion:"Hidalgo",addressCountry:"MX"},contactPoint:{"@type":"ContactPoint",contactType:"Customer Support",email:"armsystechno@gmail.com",url:"https://m.me/mahitek3dlabmx"}},t=document.createElement("script");t.type="application/ld+json",t.id="org-schema",t.textContent=JSON.stringify(e),document.head.appendChild(t)}catch(e){}}(),await Promise.all([p(),L()]),function(){if("undefined"==typeof IntersectionObserver)return f||v(),void(y||w());const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target,o=n.id;"promos"!==o||f?"faq"!==o||y||(w(),e.unobserve(n)):(v(),e.unobserve(n))}})},{rootMargin:"200px"}),t=document.getElementById("promos"),n=document.getElementById("faq");t&&e.observe(t),n&&e.observe(n)}(),function(){const e=new URLSearchParams(location.search),t=e.get("m"),n=e.get("q"),o=e.get("p"),a=document.getElementById("category-filter"),r=document.getElementById("search-input");let i=!1;t&&a&&(a.value=t,i=!0);n&&r&&(r.value=n,i=!0);i&&h();if(o){const e=[...document.querySelectorAll(".product-card")].find(e=>e.querySelector(".product-sku")?.textContent.includes(o));e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.style.outline="2px solid rgba(6, 182, 212, 0.7)",setTimeout(()=>{e.style.outline="none"},2e3))}const s=()=>{const e=new URLSearchParams(location.search),t=a?.value&&"todas"!==a.value?a.value:"",n=r?.value?.trim()||"";t?e.set("m",t):e.delete("m"),n?e.set("q",n):e.delete("q"),history.replaceState(null,"",`${location.pathname}${e.toString()?`?${e}`:""}`)};a&&a.addEventListener("change",s);r&&r.addEventListener("input",s)}(),e.DEBUG_MODE&&(console.log(`‚úÖ ${n.obtener("debug.iniciado")}`),console.log(`üìä ${n.obtener("debug.productosOK")}: ${u.length}`),console.log(`üí∞ Margen de precio: ${e.PRICE_MARKUP} (${100*(e.PRICE_MARKUP-1)}%)`),console.log(`üîÑ Redondeo: $${e.PRICE_STEP} MXN`))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",_):_(),window.MahitekLab={config:e,calculateSalePrice:function(t,n=e.PRICE_MARKUP,o=e.PRICE_STEP){const a=t*n;return Math.round(a/o)*o},products:()=>u,filterProducts:h};